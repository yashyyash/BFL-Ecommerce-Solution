@if (loading) {
  <div class="text-center my-4">
    Loading product...
  </div>
}

@if (error) {
  <div class="alert alert-danger my-4">{{ error }}</div>
}

@if (product) {
  <div class="container my-4">
    <div class="row">

      <div class="col-md-6">
        <div id="carousel-{{ product._id }}" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            @for(img of product.images; track img; let i = $index){
              <div class="carousel-item" [class.active]="i === 0">
                <img [src]="img" class="d-block w-100" [alt]="product.name" />
              </div>
            }
          </div>
          <button class="carousel-control-prev" type="button" [attr.data-bs-target]="'#carousel-' + product._id" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" [attr.data-bs-target]="'#carousel-' + product._id" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>

      <div class="col-md-6">
        <h2>{{ product.name }}</h2>
        <p class="text-muted">{{ product.brand }}</p>
        <p><strong>Category:</strong> {{ product.categoryId.name }}</p>

        @if (product.discount > 0) {
          <p>
            <strong>Price:</strong> {{ product.price | number:'1.2-2' }}
            <span class="badge bg-warning text-dark ms-2">-{{ product.discount }}%</span>
          </p>
        } @else {
          <p>
            <strong>Price:</strong> {{ product.price | number:'1.2-2' }}
          </p>
        }

        <p><strong>Stock:</strong> {{ product.stock }}</p>
        <p><strong>Rating:</strong> {{ product.rating | number:'1.1-2' }}</p>

        <h5 class="mt-3">Attributes:</h5>
        <ul>
          <li><strong>Color:</strong> {{ product.attributes.color }}</li>
          <li><strong>Material:</strong> {{ product.attributes.material }}</li>
          <li><strong>Warranty:</strong> {{ product.attributes.warranty }}</li>
        </ul>

        @if (product.isFeatured) {
          <span class="badge bg-success mt-2 d-inline-block">Featured</span>
        }
      </div>

    </div>
  </div>
}
<div class="container my-4">
  <h2 class="mb-4">Products</h2>

  <div class="row">
    @for (product of products; track product._id) {
      <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4">
        <div class="card h-100 shadow-sm border-warning">

          <!-- Product images -->
          <div id="carousel-@product._id" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
              @for (img of product.images; track img) {
                <div class="carousel-item" [class.active]="product.images.indexOf(img) === 0">
                  <img [src]="img" class="d-block w-100" [alt]="product.name" />
                </div>
              }
            </div>
          </div>

          <!-- Card body -->
          <div class="card-body">
            <h5 class="card-title">@product.name</h5>
            <p class="text-muted mb-1">@product.brand</p>
            <p class="mb-1"><strong>Category:</strong> @product.categoryId.name</p>

            @if (product.discount > 0) {
              <p class="mb-1">
                <strong>Price:</strong> ${{ product.price | number:'1.2-2' }}
                <span class="badge bg-warning text-dark ms-2">-@product.discount%</span>
              </p>
            } @else {
              <p class="mb-1"><strong>Price:</strong> ${{ product.price | number:'1.2-2' }}</p>
            }

            <p class="mb-1"><strong>Stock:</strong> @product.stock</p>
            <p class="mb-1"><strong>Rating:</strong> {{ product.rating | number:'1.1-2' }}</p>

            @if (product.isFeatured) {
              <span class="badge bg-success mt-1 d-inline-block">Featured</span>
            }
          </div>

          <div class="card-footer text-center">
            <button class="btn btn-sm btn-outline-warning w-100">View Details</button>
          </div>

        </div>
      </div>
    }
  </div>
  <nav aria-label="Page navigation example" class="mt-4">
  <button class="btn btn-sm btn-outline-primary me-1"
          [disabled]="currentPage === 1"
          (click)="loadPage(currentPage - 1)">
    Previous
  </button>

    @for(page of totalPagesArray; track page){
    <button class="btn btn-sm me-1"
            [class.btn-primary]="page === currentPage"
            [class.btn-outline-primary]="page !== currentPage"
            (click)="loadPage(page)">{{page}}
    </button>
    } 

  <button class="btn btn-sm btn-outline-primary ms-1"
          [disabled]="currentPage === totalPages"
          (click)="loadPage(currentPage + 1)">
    Next
  </button>
</nav>
</div>
